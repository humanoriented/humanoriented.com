<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google AJAX Search API Example</title>
<link href="http://www.google.com/uds/css/gsearch.css" type="text/css" rel="stylesheet"/>
<script src="http://www.google.com/uds/api?file=uds.js&amp;v=1.0&amp;key=ABQIAAAAwojmGg_pWRP1rNg7brMcgxQ3IVOuhghay44XJX4bzNhC7WGv5hTNMapAbz5NcEBwi4u0AYE-2yWAyg" type="text/javascript"></script>
<script language="Javascript" type="text/javascript">
//<![CDATA[
function OnLoad() {

	// SEARCH OPTIONS
	var searchOptions = new GsearcherOptions();
	// expand mode -- for linear drawing mode, not tabbed.
//	searchOptions.setExpandMode(GSearchControl.EXPAND_MODE_OPEN);
//	searchOptions.setExpandMode(GSearchControl.EXPAND_MODE_CLOSED);
//	searchOptions.setExpandMode(GSearchControl.EXPAND_MODE_PARTIAL);		

	// INSTANTIATE SEARCH CONTROL
    var searchControl = new GSearchControl();
    // Add in a full set of searchers
    var webSearch = new GwebSearch();

	// CHANGE SOME SEARCH RESTRICTIONS AND PROPERTIES FOR VIEW
	webSearch.setUserDefinedLabel("Calorie Search");
	webSearch.setUserDefinedClassSuffix("webSearch");
//	webSearch.setSiteRestriction("calorie-count.com");
	// ADD A "COPY" BUTTON TO DO WHAT YOU WANT W/ THE RESULT
//	searchControl.setOnKeepCallback(this, keepHandler);

	// DO THINGS ON SEARCH START AND COMPLETE
//	searchControl.setSearchCompleteCallback(this, doIt);
//	searchControl.setSearchStartingCallback(this, doIt);


    searchControl.addSearcher(webSearch, searchOptions);

	// DRAWING OPTIONS
	// create a drawOptions object
	var drawOptions = new GdrawOptions();
	// tell the searcher to draw itself in linear mode
	drawOptions.setDrawMode(GSearchControl.DRAW_MODE_LINEAR);
	// decouple the form and the results
	// also see searchOptions.
	drawOptions.setSearchFormRoot(document.getElementById('searchControl'))

    // Tell the searcher to draw itself and tell it where to attach
    searchControl.draw(document.getElementById('searchResults'), drawOptions);
    // Execute an inital search
    searchControl.execute("human-oriented systems");
}

function doIt(sc, searcher) {
	alert('event fired!');
}

function keepHandler(result) {
  	// clone the result html node
  	var node = result.html.cloneNode(true);
  	alert(node.innerHTML);
	// attach it
  	var savedResults = document.getElementById("savedResults");
  	savedResults.appendChild(node);
}
//]]>
</script>
<style type="text/css">
.gsc-resultsRoot-webSearch .gsc-title {
	color: green;
}

</style>
</head>
<body onload="OnLoad()">
<div id="savedResults" style="float:right; width:300px;"></div>
<div id="searchControl" style="width:200px;"></div>
<p>The Google AJAX Search API is designed to allow users to distribute search results to others, primarily through content creation applications like blog posts, message boards, etc.</p>
<div id="searchResults" style="clear:left;"></div>
</body>
</html>